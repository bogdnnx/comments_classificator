<!DOCTYPE html>
<html>
<head>
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞: {{ project.name }}</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .summary { margin: 20px 0; padding: 10px; border: 1px solid #ccc; background-color: #f9f9f9; }
        .summary h3 { margin-top: 0; }
        .stats { display: flex; justify-content: space-around; }
        .stat-box { padding: 10px; margin: 5px; border: 1px solid #ddd; border-radius: 5px; text-align: center; }
        .positive { background-color: #d4edda; }
        .negative { background-color: #f8d7da; }
        .back-link { margin-top: 20px; }
        .top-posts { margin-top: 20px; }
        .top-post-item { margin-bottom: 15px; padding: 10px; border: 1px solid #eee; }
        .post-url { font-size: 0.9em; color: #666; }
        .comments { margin-top: 10px; }
        .comment { padding: 5px; margin: 2px 0; border-radius: 3px; }
        .comment.positive { background-color: #d4edda; }
        .comment.negative { background-color: #f8d7da; }
    </style>
</head>
<body>
    <h1>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞: "{{ query }}"</h1>
    <div class="summary">
        <h3>–°–≤–æ–¥–∫–∞</h3>
        <div class="stats">
            <div class="stat-box positive">
                <strong>–ü–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö:</strong><br>{{ stats.positive }}
            </div>
            <div class="stat-box negative">
                <strong>–ù–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö:</strong><br>{{ stats.negative }}
            </div>
            <div class="stat-box">
                <strong>–í—Å–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:</strong><br>{{ stats.total }}
            </div>
            <div class="stat-box">
                <strong>–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤:</strong><br>{{ stats.posts_count }}
            </div>
        </div>
    </div>

    <div class="top-posts">
        <h3>–ü–æ—Å—Ç—ã —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</h3>
        {% for post in stats.top_posts %}
        <div class="top-post-item">
            <h4>{{ post.text[:100] }}{% if post.text|length > 100 %}...{% endif %}</h4>
            <div class="post-url"><a href="{{ post.url }}" target="_blank">{{ post.url }}</a></div>
            <div class="comments">
                {% for comment in stats.comments_by_post.get(post.id, []) %}
                <div class="comment {{ comment.sentiment }}">{{ comment.text[:100] }}{% if comment.text|length > 100 %}...{% endif %}</div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="back-link">
        <a href="/">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</body>
</html>